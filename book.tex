\usepackage[notref,notcite]{showkeys}
\renewcommand*{\showkeyslabelformat}[1]{%
  {\rotatebox[origin=cr]{60}{\normalfont\tiny\ttfamily#1}}}
%\includeonly{}

%%% Index and glossary
\makeglossary
\makeindex

%%% Version file
\input version

%% speed up compilation by compiling tikz figure separately
%% unless we say not to be defining \OPTnotikzexternal
\ifthenelse{\isundefined{\OPTnotikzexternal}}{%
  \usepackage{tikz-external-hash}
  \usetikzlibrary{external}%
  \tikzset{external/system call={pdflatex -fmt macros \tikzexternalcheckshellescape -halt-on-error -interaction=batchmode -jobname "\image" "\texsource"}}
  \tikzexternalize[prefix=figures/]%
  \AtBeginEnvironment{tikzcd}{\tikzexternaldisable}
  \AtEndEnvironment{tikzcd}{\tikzexternalenable}
}{}

\begin{document}

\frontmatter
\thetitlepage
\thecopyrightpage

\renewcommand*{\contentsname}{Short contents}
\setcounter{tocdepth}{0} % chapter
\tableofcontents
\clearpage
\renewcommand*{\contentsname}{Contents}
\setcounter{tocdepth}{1} % section
\tableofcontents

%\include{preface}

\mainmatter

\include{intro}
\include{intro-uf}
\include{circle}
\include{group}
\include{subgroups}
\include{symmetry}
\include{fggroups}
\include{fingp}
\include{fields}
\include{EuclideanGeometry}
\include{galois}

\appendix
\include{history}
\include{metamath}
\include{choicefin}

\backmatter

% No margin notes in the back matter
\begin{fullwidth}
\raggedright
\printbibliography
\printglossary
\printindex
\end{fullwidth}
\end{document}

% Local Variables:
% fill-column: 144
% latex-block-names: ("lemma" "theorem" "remark" "definition" "corollary" "fact" "properties" "conjecture" "proof" "question" "proposition" "exercise")
% TeX-master: t
% compile-command: "make book.pdf"
% End:
